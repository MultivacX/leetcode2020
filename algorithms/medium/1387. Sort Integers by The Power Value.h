// 1387. Sort Integers by The Power Value

// Runtime: 152 ms, faster than 39.59% of C++ online submissions for Sort Integers by The Power Value.
// Memory Usage: 16.5 MB, less than 100.00% of C++ online submissions for Sort Integers by The Power Value.

class Solution {
public:
    int getKth(int lo, int hi, int k) {
        // vector<int> powers(1001, 0);
        // for (int i = 0; i <= 1000; ++i) powers[i] = get_power(powers, i);
        // for (int i = 0; i <= 1000; ++i) cout << "{" << powers[i] << ", " << i << "}, ";
        static const vector<vector<int>> powers{{0, 0}, {0, 1}, {1, 2}, {7, 3}, {2, 4}, {5, 5}, {8, 6}, {16, 7}, {3, 8}, {19, 9}, {6, 10}, {14, 11}, {9, 12}, {9, 13}, {17, 14}, {17, 15}, {4, 16}, {12, 17}, {20, 18}, {20, 19}, {7, 20}, {7, 21}, {15, 22}, {15, 23}, {10, 24}, {23, 25}, {10, 26}, {111, 27}, {18, 28}, {18, 29}, {18, 30}, {106, 31}, {5, 32}, {26, 33}, {13, 34}, {13, 35}, {21, 36}, {21, 37}, {21, 38}, {34, 39}, {8, 40}, {109, 41}, {8, 42}, {29, 43}, {16, 44}, {16, 45}, {16, 46}, {104, 47}, {11, 48}, {24, 49}, {24, 50}, {24, 51}, {11, 52}, {11, 53}, {112, 54}, {112, 55}, {19, 56}, {32, 57}, {19, 58}, {32, 59}, {19, 60}, {19, 61}, {107, 62}, {107, 63}, {6, 64}, {27, 65}, {27, 66}, {27, 67}, {14, 68}, {14, 69}, {14, 70}, {102, 71}, {22, 72}, {115, 73}, {22, 74}, {14, 75}, {22, 76}, {22, 77}, {35, 78}, {35, 79}, {9, 80}, {22, 81}, {110, 82}, {110, 83}, {9, 84}, {9, 85}, {30, 86}, {30, 87}, {17, 88}, {30, 89}, {17, 90}, {92, 91}, {17, 92}, {17, 93}, {105, 94}, {105, 95}, {12, 96}, {118, 97}, {25, 98}, {25, 99}, {25, 100}, {25, 101}, {25, 102}, {87, 103}, {12, 104}, {38, 105}, {12, 106}, {100, 107}, {113, 108}, {113, 109}, {113, 110}, {69, 111}, {20, 112}, {12, 113}, {33, 114}, {33, 115}, {20, 116}, {20, 117}, {33, 118}, {33, 119}, {20, 120}, {95, 121}, {20, 122}, {46, 123}, {108, 124}, {108, 125}, {108, 126}, {46, 127}, {7, 128}, {121, 129}, {28, 130}, {28, 131}, {28, 132}, {28, 133}, {28, 134}, {41, 135}, {15, 136}, {90, 137}, {15, 138}, {41, 139}, {15, 140}, {15, 141}, {103, 142}, {103, 143}, {23, 144}, {116, 145}, {116, 146}, {116, 147}, {23, 148}, {23, 149}, {15, 150}, {15, 151}, {23, 152}, {36, 153}, {23, 154}, {85, 155}, {36, 156}, {36, 157}, {36, 158}, {54, 159}, {10, 160}, {98, 161}, {23, 162}, {23, 163}, {111, 164}, {111, 165}, {111, 166}, {67, 167}, {10, 168}, {49, 169}, {10, 170}, {124, 171}, {31, 172}, {31, 173}, {31, 174}, {80, 175}, {18, 176}, {31, 177}, {31, 178}, {31, 179}, {18, 180}, {18, 181}, {93, 182}, {93, 183}, {18, 184}, {44, 185}, {18, 186}, {44, 187}, {106, 188}, {106, 189}, {106, 190}, {44, 191}, {13, 192}, {119, 193}, {119, 194}, {119, 195}, {26, 196}, {26, 197}, {26, 198}, {119, 199}, {26, 200}, {18, 201}, {26, 202}, {39, 203}, {26, 204}, {26, 205}, {88, 206}, {88, 207}, {13, 208}, {39, 209}, {39, 210}, {39, 211}, {13, 212}, {13, 213}, {101, 214}, {101, 215}, {114, 216}, {26, 217}, {114, 218}, {52, 219}, {114, 220}, {114, 221}, {70, 222}, {70, 223}, {21, 224}, {52, 225}, {13, 226}, {13, 227}, {34, 228}, {34, 229}, {34, 230}, {127, 231}, {21, 232}, {83, 233}, {21, 234}, {127, 235}, {34, 236}, {34, 237}, {34, 238}, {52, 239}, {21, 240}, {21, 241}, {96, 242}, {96, 243}, {21, 244}, {21, 245}, {47, 246}, {47, 247}, {109, 248}, {47, 249}, {109, 250}, {65, 251}, {109, 252}, {109, 253}, {47, 254}, {47, 255}, {8, 256}, {122, 257}, {122, 258}, {122, 259}, {29, 260}, {29, 261}, {29, 262}, {78, 263}, {29, 264}, {122, 265}, {29, 266}, {21, 267}, {29, 268}, {29, 269}, {42, 270}, {42, 271}, {16, 272}, {29, 273}, {91, 274}, {91, 275}, {16, 276}, {16, 277}, {42, 278}, {42, 279}, {16, 280}, {42, 281}, {16, 282}, {60, 283}, {104, 284}, {104, 285}, {104, 286}, {42, 287}, {24, 288}, {29, 289}, {117, 290}, {117, 291}, {117, 292}, {117, 293}, {117, 294}, {55, 295}, {24, 296}, {73, 297}, {24, 298}, {117, 299}, {16, 300}, {16, 301}, {16, 302}, {42, 303}, {24, 304}, {37, 305}, {37, 306}, {37, 307}, {24, 308}, {24, 309}, {86, 310}, {86, 311}, {37, 312}, {130, 313}, {37, 314}, {37, 315}, {37, 316}, {37, 317}, {55, 318}, {55, 319}, {11, 320}, {24, 321}, {99, 322}, {99, 323}, {24, 324}, {24, 325}, {24, 326}, {143, 327}, {112, 328}, {50, 329}, {112, 330}, {24, 331}, {112, 332}, {112, 333}, {68, 334}, {68, 335}, {11, 336}, {112, 337}, {50, 338}, {50, 339}, {11, 340}, {11, 341}, {125, 342}, {125, 343}, {32, 344}, {125, 345}, {32, 346}, {125, 347}, {32, 348}, {32, 349}, {81, 350}, {81, 351}, {19, 352}, {125, 353}, {32, 354}, {32, 355}, {32, 356}, {32, 357}, {32, 358}, {50, 359}, {19, 360}, {45, 361}, {19, 362}, {45, 363}, {94, 364}, {94, 365}, {94, 366}, {45, 367}, {19, 368}, {19, 369}, {45, 370}, {45, 371}, {19, 372}, {19, 373}, {45, 374}, {45, 375}, {107, 376}, {63, 377}, {107, 378}, {58, 379}, {107, 380}, {107, 381}, {45, 382}, {45, 383}, {14, 384}, {32, 385}, {120, 386}, {120, 387}, {120, 388}, {120, 389}, {120, 390}, {120, 391}, {27, 392}, {58, 393}, {27, 394}, {76, 395}, {27, 396}, {27, 397}, {120, 398}, {120, 399}, {27, 400}, {19, 401}, {19, 402}, {19, 403}, {27, 404}, {27, 405}, {40, 406}, {40, 407}, {27, 408}, {40, 409}, {27, 410}, {133, 411}, {89, 412}, {89, 413}, {89, 414}, {133, 415}, {14, 416}, {133, 417}, {40, 418}, {40, 419}, {40, 420}, {40, 421}, {40, 422}, {32, 423}, {14, 424}, {58, 425}, {14, 426}, {53, 427}, {102, 428}, {102, 429}, {102, 430}, {40, 431}, {115, 432}, {27, 433}, {27, 434}, {27, 435}, {115, 436}, {115, 437}, {53, 438}, {53, 439}, {115, 440}, {27, 441}, {115, 442}, {53, 443}, {71, 444}, {71, 445}, {71, 446}, {97, 447}, {22, 448}, {115, 449}, {53, 450}, {53, 451}, {14, 452}, {14, 453}, {14, 454}, {40, 455}, {35, 456}, {128, 457}, {35, 458}, {128, 459}, {35, 460}, {35, 461}, {128, 462}, {128, 463}, {22, 464}, {35, 465}, {84, 466}, {84, 467}, {22, 468}, {22, 469}, {128, 470}, {128, 471}, {35, 472}, {35, 473}, {35, 474}, {27, 475}, {35, 476}, {35, 477}, {53, 478}, {53, 479}, {22, 480}, {48, 481}, {22, 482}, {22, 483}, {97, 484}, {97, 485}, {97, 486}, {141, 487}, {22, 488}, {48, 489}, {22, 490}, {141, 491}, {48, 492}, {48, 493}, {48, 494}, {97, 495}, {110, 496}, {22, 497}, {48, 498}, {48, 499}, {110, 500}, {110, 501}, {66, 502}, {66, 503}, {110, 504}, {61, 505}, {110, 506}, {35, 507}, {48, 508}, {48, 509}, {48, 510}, {61, 511}, {9, 512}, {35, 513}, {123, 514}, {123, 515}, {123, 516}, {123, 517}, {123, 518}, {61, 519}, {30, 520}, {123, 521}, {30, 522}, {123, 523}, {30, 524}, {30, 525}, {79, 526}, {79, 527}, {30, 528}, {30, 529}, {123, 530}, {123, 531}, {30, 532}, {30, 533}, {22, 534}, {22, 535}, {30, 536}, {22, 537}, {30, 538}, {48, 539}, {43, 540}, {43, 541}, {43, 542}, {136, 543}, {17, 544}, {43, 545}, {30, 546}, {30, 547}, {92, 548}, {92, 549}, {92, 550}, {43, 551}, {17, 552}, {136, 553}, {17, 554}, {30, 555}, {43, 556}, {43, 557}, {43, 558}, {87, 559}, {17, 560}, {43, 561}, {43, 562}, {43, 563}, {17, 564}, {17, 565}, {61, 566}, {61, 567}, {105, 568}, {56, 569}, {105, 570}, {30, 571}, {105, 572}, {105, 573}, {43, 574}, {43, 575}, {25, 576}, {30, 577}, {30, 578}, {30, 579}, {118, 580}, {118, 581}, {118, 582}, {30, 583}, {118, 584}, {56, 585}, {118, 586}, {118, 587}, {118, 588}, {118, 589}, {56, 590}, {56, 591}, {25, 592}, {74, 593}, {74, 594}, {74, 595}, {25, 596}, {25, 597}, {118, 598}, {118, 599}, {17, 600}, {56, 601}, {17, 602}, {69, 603}, {17, 604}, {17, 605}, {43, 606}, {43, 607}, {25, 608}, {131, 609}, {38, 610}, {38, 611}, {38, 612}, {38, 613}, {38, 614}, {69, 615}, {25, 616}, {131, 617}, {25, 618}, {131, 619}, {87, 620}, {87, 621}, {87, 622}, {131, 623}, {38, 624}, {25, 625}, {131, 626}, {131, 627}, {38, 628}, {38, 629}, {38, 630}, {38, 631}, {38, 632}, {30, 633}, {38, 634}, {30, 635}, {56, 636}, {56, 637}, {56, 638}, {131, 639}, {12, 640}, {51, 641}, {25, 642}, {25, 643}, {100, 644}, {100, 645}, {100, 646}, {38, 647}, {25, 648}, {144, 649}, {25, 650}, {100, 651}, {25, 652}, {25, 653}, {144, 654}, {144, 655}, {113, 656}, {51, 657}, {51, 658}, {51, 659}, {113, 660}, {113, 661}, {25, 662}, {25, 663}, {113, 664}, {51, 665}, {113, 666}, {144, 667}, {69, 668}, {69, 669}, {69, 670}, {95, 671}, {12, 672}, {64, 673}, {113, 674}, {113, 675}, {51, 676}, {51, 677}, {51, 678}, {64, 679}, {12, 680}, {64, 681}, {12, 682}, {38, 683}, {126, 684}, {126, 685}, {126, 686}, {38, 687}, {33, 688}, {126, 689}, {126, 690}, {126, 691}, {33, 692}, {33, 693}, {126, 694}, {126, 695}, {33, 696}, {126, 697}, {33, 698}, {64, 699}, {82, 700}, {82, 701}, {82, 702}, {170, 703}, {20, 704}, {33, 705}, {126, 706}, {126, 707}, {33, 708}, {33, 709}, {33, 710}, {64, 711}, {33, 712}, {25, 713}, {33, 714}, {25, 715}, {33, 716}, {33, 717}, {51, 718}, {51, 719}, {20, 720}, {46, 721}, {46, 722}, {46, 723}, {20, 724}, {20, 725}, {46, 726}, {46, 727}, {95, 728}, {33, 729}, {95, 730}, {139, 731}, {95, 732}, {95, 733}, {46, 734}, {46, 735}, {20, 736}, {139, 737}, {20, 738}, {20, 739}, {46, 740}, {46, 741}, {46, 742}, {95, 743}, {20, 744}, {90, 745}, {20, 746}, {46, 747}, {46, 748}, {46, 749}, {46, 750}, {139, 751}, {108, 752}, {20, 753}, {64, 754}, {64, 755}, {108, 756}, {108, 757}, {59, 758}, {59, 759}, {108, 760}, {33, 761}, {108, 762}, {152, 763}, {46, 764}, {46, 765}, {46, 766}, {59, 767}, {15, 768}, {33, 769}, {33, 770}, {33, 771}, {121, 772}, {121, 773}, {121, 774}, {152, 775}, {121, 776}, {33, 777}, {121, 778}, {59, 779}, {121, 780}, {121, 781}, {121, 782}, {121, 783}, {28, 784}, {121, 785}, {59, 786}, {59, 787}, {28, 788}, {28, 789}, {77, 790}, {77, 791}, {28, 792}, {77, 793}, {28, 794}, {103, 795}, {121, 796}, {121, 797}, {121, 798}, {72, 799}, {28, 800}, {59, 801}, {20, 802}, {20, 803}, {20, 804}, {20, 805}, {20, 806}, {72, 807}, {28, 808}, {46, 809}, {28, 810}, {134, 811}, {41, 812}, {41, 813}, {41, 814}, {134, 815}, {28, 816}, {41, 817}, {41, 818}, {41, 819}, {28, 820}, {28, 821}, {134, 822}, {134, 823}, {90, 824}, {134, 825}, {90, 826}, {41, 827}, {90, 828}, {90, 829}, {134, 830}, {134, 831}, {15, 832}, {28, 833}, {134, 834}, {134, 835}, {41, 836}, {41, 837}, {41, 838}, {85, 839}, {41, 840}, {41, 841}, {41, 842}, {41, 843}, {41, 844}, {41, 845}, {33, 846}, {33, 847}, {15, 848}, {59, 849}, {59, 850}, {59, 851}, {15, 852}, {15, 853}, {54, 854}, {54, 855}, {103, 856}, {28, 857}, {103, 858}, {147, 859}, {103, 860}, {103, 861}, {41, 862}, {41, 863}, {116, 864}, {147, 865}, {28, 866}, {28, 867}, {28, 868}, {28, 869}, {28, 870}, {178, 871}, {116, 872}, {147, 873}, {116, 874}, {28, 875}, {54, 876}, {54, 877}, {54, 878}, {147, 879}, {116, 880}, {116, 881}, {28, 882}, {28, 883}, {116, 884}, {116, 885}, {54, 886}, {54, 887}, {72, 888}, {147, 889}, {72, 890}, {46, 891}, {72, 892}, {72, 893}, {98, 894}, {98, 895}, {23, 896}, {67, 897}, {116, 898}, {116, 899}, {54, 900}, {54, 901}, {54, 902}, {116, 903}, {15, 904}, {67, 905}, {15, 906}, {54, 907}, {15, 908}, {15, 909}, {41, 910}, {41, 911}, {36, 912}, {129, 913}, {129, 914}, {129, 915}, {36, 916}, {36, 917}, {129, 918}, {129, 919}, {36, 920}, {129, 921}, {36, 922}, {67, 923}, {129, 924}, {129, 925}, {129, 926}, {116, 927}, {23, 928}, {129, 929}, {36, 930}, {36, 931}, {85, 932}, {85, 933}, {85, 934}, {129, 935}, {23, 936}, {173, 937}, {23, 938}, {85, 939}, {129, 940}, {129, 941}, {129, 942}, {36, 943}, {36, 944}, {36, 945}, {36, 946}, {36, 947}, {36, 948}, {36, 949}, {28, 950}, {28, 951}, {36, 952}, {28, 953}, {36, 954}, {28, 955}, {54, 956}, {54, 957}, {54, 958}, {129, 959}, {23, 960}, {49, 961}, {49, 962}, {49, 963}, {23, 964}, {23, 965}, {23, 966}, {142, 967}, {98, 968}, {49, 969}, {98, 970}, {36, 971}, {98, 972}, {98, 973}, {142, 974}, {142, 975}, {23, 976}, {98, 977}, {49, 978}, {49, 979}, {23, 980}, {23, 981}, {142, 982}, {142, 983}, {49, 984}, {23, 985}, {49, 986}, {36, 987}, {49, 988}, {49, 989}, {98, 990}, {98, 991}, {111, 992}, {93, 993}, {23, 994}, {23, 995}, {49, 996}, {49, 997}, {49, 998}, {49, 999}, {111, 1000}};
        
        vector<vector<int>> tmp(powers.begin() + lo, powers.begin() + hi + 1);
        sort(begin(tmp), end(tmp));
        // for (auto& x : tmp) cout << x[0] << ", " << x[1] << endl;
        return tmp[k - 1][1];
    }
    
    // int get_power(vector<int>& powers, int i) {
    //     static unordered_map<int, int> m{{0, 0}, {1, 0}, {2, 1}};
    //     if (m.count(i)) return m[i];
    //     if (i & 1) m[i] = 1 + get_power(powers, 3 * i + 1);
    //     else m[i] = 1 + get_power(powers, i >> 1);
    //     return m[i];
    // }
};